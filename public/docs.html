<!DOCTYPE html>
<html>
<head>
    <title>RobotQuest: Documentation</title>
    <script src="/assets/js/jquery.min.js"></script>

    <link rel="stylesheet" href="/assets/css/lib.css"/>
    <link rel="stylesheet" href="/docs.css"/>

    <style>


    .main {
        padding: 20px;
        font-size: 14px;
        font-family: "Helvetica";
        max-width: 960px;
    }

    ul {

    }

    ul li {
        margin-left: 20px;
    }

    h1, h2, h3, h4, h5 {
        margin-top: 20px;
        margin-bottom: 5px;
    }

    h1, h2 {
        margin-top: 30px;
        font-family: robothead;
    }

    h1 {
        font-size: 60px;
    }

    h2 {
        font-size: 50px;
    }

    p, table {
        margin-top: 1em;
        margin-bottom: 1em;
    }

    pre, code, table.methods td, table.fields td {
        font-family: "Courier";
        background-color: #EEE;
        padding: 2px;
    }

    pre, code, table.methods td, table.fields td {
        font-size: 12px;
    }

    pre {
        background-color: #EEE;
        padding: 5px;
        line-height: 1.4em;
    }

    table.methods td pre {
        border: none;
    }

    .toc {
    }

    .toc > a {
        display: block;
        margin-top: 5px;
        margin-bottom: 2px;
        font-weight: bold;
    }

    .toc ul.routes {
        font-family: "Courier";
    }

    .route h3 {
        font-family: "Courier";
    }

    .route div {
        margin-bottom: 5px;
    } 

    .route pre span {
        font-weight: bold;
    }

    </style>
</head>
<body>

  <header>
    <a href="/viewer/" class="logo">
      <img id="logo" src="/assets/logo2.png" alt="RobotQuest">
      <div class="title"><div class='robot'>Robot</div><div class='quest'>Quest</div></div>
     </a>
  </header>
  <div class="main">

    <h1 id="what">What is RobotQuest?</h1>
    <p>RobotQuest is a MMO, programming game. Instead of playing RobotQuest directly, you write a program that plays it for you. Your program communicates with the <a href="#api">game server API</a> over HTTP by sending and receiving JSON messages. <a href="/viewer/">You can watch the game being played here.</a></p>

    <p>All players share a single world</p>

    <p><a href="/viewer">The Viewer</a> lets you watch the game being played live.</p>
    <p><a href="#api">The Documentation</a> will teach you how to play the game. Playing well is up to you.</p>


    <h2>What can I do?</h2>

    <p>You can create minions (heroes/units/monsters), move them, and attack things near you. There is an AI player that spawns minions of increasing degrees of danger to give you trouble.</p>

    <h2>What's the goal?</h2>

    <p>You can see who has the most kills and has survived the longest on the <a href="/viewer">Viewer</a>. The game will be largely defined by the programs written for it. See what you can write and how it affects the game. </p>

    <h2>Rules</h2>

    <p>Please respect the following rules. Later the server will enforce them.</p>

    <ul>
      <li><strong>Spawn with purpose</strong> - The API allows you to spawn multiple minions per player. Explore getting minions to work together, but don't spawn one on every square or anything. Consider having internal rules, like you can only spawn a minion when you kill one.</li>
    </ul>

    <h1 id="api">Documentation</h1>

    <div class="toc">
      <a href="#examples">Examples</a>
      <a href="#types">Types</a>
      <ul>
        <li><a href="#Fault">Fault</a>
        <li><a href="#Id">Id</a>
        <li><a href="#Ok">Ok</a>
        <li><a href="#GameInfo">GameInfo</a>
        <li><a href="#Player">Player</a>
        <li><a href="#Minion">Minion</a>
        <li><a href="#Command">Command</a>
      </ul>
      <a href="#routes">Routes</a>
      <ul class="routes">
        <li><a href="#game_info">GET /game/info</a>
        <li><a href="#game_objects">GET /game/objects</a>
        <li><a href="#new_player">POST /players</a>
        <li><a href="#get_player">GET /players/:name</a>
        <li><a href="#new_minion">POST /players/:playerId/minions</a>
        <li><a href="#get_minion">GET /minions/:minionId</a>
        <li><a href="#command">POST /players/:playerId/minions/:minionId/commands</a>
        <li><a href="#delete_player">DELETE /players/:playerId</a>
        <li><a href="#delete_minion">DELETE /players/:playerId/minions/:minionId</a>
      </ul>
    </div>



        <h2 id="examples">Examples</h2>
        <p>These examples are in pseudocode. For a complete example <a href="https://github.com/seanhess/botland/blob/master/ai/app.coffee">please take a look at the AI (CoffeeScript)</a></p>

        <h3>Control a minion</h3>
        <pre># register our player
player = {name:"example", source: "http://github.com/seanhess/botland"}
player.id = POST "/players" player

# spawn a minion
minion = {x: 0, y: 5, name:"example1", sprite: "dragon-1-3"}
minion.id = POST "/players/$player.id/minions" minion

# move our minion
POST "/minions/$player.id/minions/$minion.id" {action: "Move", direction: "Right"} 

# remove our minion
DELETE "/minions/$player.id/minions/$minion.id"
</pre>

        <h3>See what is going on</h3>
        <pre>game = GET "/game/info"
repeatEvery game.tick 
  objects = GET "/game/objects"
  for minion in objects
    print minion
</pre>




  <h2 id="types">Types</h2>

  <div class="object">
    <h3 id="Fault">Fault</h3>
    <pre>{ message: "Space occupied" }</pre>
    <p>Any method can return a <code>Fault</code> instead of its regular response.</p>
  </div>

  <div class="object">
    <h3 id="Ok">Ok</h3>
    <pre>"Ok"</pre>
  </div>

  <div class="object">
    <h3 id="Id">Id</h3>
    <pre>"6dc21b03a79fa15d"</pre>
  </div>

  <div class="object">
    <h3 id="GameInfo">GameInfo</h3>
    <pre>{
  width: 25,
  height: 20,
  tick: 1000
}</pre>
      <p><code>tick</code> - Game tick in ms. How often you can send commands and poll for information</p>
      <p><code>width, height</code> - World dimensions in squares</p>
  </div>

  <div class="object">
    <h3 id="Player">Player</h3>
    <pre>{
  name: "sean",
  source: "http://github.com/seanhess/botland"
}</pre>
      <p><code>source</code> - Bot homepage. Source code preferred.</p>
  </div>

  <div class="object">
    <h3 id="Minion">Minion</h3>
      <pre>{
  state: "Active",
  name: "rat",
  kills: 0,
  created: "2012-05-03T12:06:48.666Z",
  player: "AI",
  id: "6dc21b03a79fa15d",
  sprite: "monster1-1-4",
  y: 18,
  x: 10
}</pre>
      <p><code>state</code> - Active or Dead</p>
      <p><code>name</code> - Player-specified name</p>
      <p><code>player</code> - Player name</p>
      <p><code>sprite</code> - Player-chosen sprite id</p>
      <p><code>x, y</code> - Position in squares</p>
  </div>

  <div class="object">
    <h3 id="Command">Command</h3>
    <pre>{
  action: "Move",
  direction: "Left"
}</pre>
      <p><code>action</code> - Move or Attack</p>
      <p><code>direction</code> - Left, Right, Up, or Down</p>
  </div>





  <h2 id="routes">Routes</h2>

  <div class="route">
    <h3 id="game_info">GET /game/info</h3>
    <p>Always call this when you start. Respect the tick and size</p>
    <pre><span>returns</span> <a href="#GameInfo">GameInfo</a></pre>
  </div>


  <div class="route">
    <h3 id="game_objects">GET /game/objects</h3>
    <p>Call this every <code>tick</code> to know where things are in the game</p>
    <div>
      <pre><span>returns</span> [<a href="#Minion">Minion</a>]</pre>
    </div>
  </div>


  <div class="route">
    <h3 id="new_player">POST /players</h3>

    <p>Register your player. Note that the id returned from this is <em>secret</em>. You use it to <a href="#new_minion">spawn</a> and <a href="#command">command</a> your bot.</p>

    <div>
      <pre><span>body</span> <a href="#Player">Player</a></pre>
    </div>

    <div>
      <pre><span>returns</span> <a href="#Id">Id</a></pre>
    </div>
  </div>


  
  <div class="route">
    <h3 id="get_player">GET /players/:name</h3>

    <p>Info about another player</p>
  
    <div>
      <pre><span>returns</span> <a href="#Player">Player</a></pre>
    </div>
  </div>



  <div class="route">
    <h3 id="new_minion">POST /players/:playerId/minions</h3>

    <p>Spawn a minion on the map</p>

    <div>
      <pre><span>body</span> <a href="#Minion">Minion</a></pre>
    </div>

    <div>
      <pre><span>returns</span> <a href="#Id">Id</a></pre>
    </div>
  </div>



  <div class="route">
    <h3 id="get_minion">GET /minions/:minionId</h3>

    <p>All available details for a minion.</p>

    <div>
      <pre><span>returns</span> <a href="#Minion">Minion</a></pre>
    </div>
  </div>


  <div class="route">
    <h3 id="command">POST /players/:playerId/minions/:minionId/commands</h3>

    <p>Issue a command to one of your minions.</p>

    <div>
      <pre><span>body</span> <a href="#Command">Command</a></pre>
    </div>

    <div>
      <pre><span>returns</span> <a href="#Ok">Ok</a></pre>
    </div>
  </div>


  <div class="route">
    <h3 id="delete_player">DELETE /players/:playerId</h3>

    <p>Remove your player</p>

    <div>
      <pre><span>returns</span> <a href="#Ok">Ok</a></pre>
    </div>
  </div>

  <div class="route">
    <h3 id="delete_minion">DELETE /players/:playerId/minions/:minionId</h3>

    <p>Remote one of your minions</p>

    <div>
      <pre><span>returns</span> <a href="#Ok">Ok</a></pre>
    </div>
  </div>

  </div>

   <a href="http://github.com/seanhess/botland"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

</body>
