<!DOCTYPE html>
<html>
<head>

<!-- <meta name="viewport" content="width=device-width, initial-scale=2.0, user-scalable=yes"> -->

<!--
http://hasgraphics.com/free-sprites/


http://protomansprites.webs.com/customsprites.htm - has some small sheets with some cool robots. can't find license. 
http://marioshi64.deviantart.com/art/MegaMan-IDK-Robot-Sprites-119661029 - mega man sprites.     
http://sebamkfan.deviantart.com/art/DizCreator-s-Robot-Master-sprites-278946621
http://nwinmore.deviantart.com/art/RPG-Maker-VX-Sprites-95545909

whole bunch of sprites! only characters. Everything is 32x32
http://blogoscoped.com/archive/2006-08-08-n51.html


http://pousse.rapiere.free.fr/tome/
Andband tiles
Silmar - less complete


http://gamemaking.indiangames.net/index_files/FreeSpritesforGames.htm - links to everything else

http://www.lostgarden.com/2007/04/free-game-graphics-tyrian-ships-and.html - tyrian - woot - high tech stuff. kind of hard to see - no 2D

http://www.lostgarden.com/2005/03/download-complete-set-of-sweet-8-bit.html - Great theme, not really enough stuff though 

http://www.lostgarden.com/2005/03/game-post-mortem-hard-vacuum.html - good terrain, tanks, etc. 

http://www.widgetworx.com/widgetworx/portfolio/spritelib.html - got some cool stuff, similar.


ADVICE
http://www.anotherearlymorning.com/2008/09/how-to-find-and-use-artwork-for-tile-based-games/

INDEXES
http://funplosion.com/free-assets.html
http://gamedev.stackexchange.com/questions/20/where-can-i-find-free-sprites-and-images
http://opengameart.org/

FROM REAL GAMES
http://www.videogamesprites.net/
http://www.bogleech.com/games.html - from real SNES games, probably not legal


SMALL SETS
http://www.over00.com/?p=1941 - some monsters
http://www.over00.com/?p=1844 - wrong resolution? spaceships :(
http://www.squidi.net/pixel/char.default.php - some chars and monsters. Non-commercial license
http://rltiles.sourceforge.net/ - plenty of monsters, limited players + clothes
http://www.reinerstilesets.de/2d-grafiken/ - iso, blah 

BIG SETS
http://untamed.wild-refuge.net/rmxpresources.php?characters - many characters!

MONSTERS
http://opengameart.org/content/more-rpg-enemies



TODO
√ 2a. Track kills
√ 2b. Track time alive
√ 2c. Kills/ time alive leaderboards
2d. Display leaderboards somewhere
2e. Click on bot for information / links

[ ] Choose any image for bot. (URL Based (or should I provide the options?)) - it will have more uniform art if I provide the options. Just provide an index.
    - make a single sprite sheet

CLEANUP
don't send down as many fields to the /minions call

MAKE A BOT THAT
3. randomly spawn monsters, and stars

///// ??? ///////
try switching to single game tick/loop

LATER
4. randomly spawn stars. collect stars. stars leaderboard

DONT DO THESE
4. add blocks, randomly spawn them. 
5. allow them to pick up blocks

[ ] 


-->

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/async.min.js"></script>
<script src="/demo/api.js"></script>
<style>

@font-face {
    font-family: robot;
    src: url('/assets/robot.ttf')  format('truetype');
}

@font-face {
    font-family: robothead;
    src: url(/assets/robothead.ttf) format('truetype');
}

@font-face {
    font-family: knightsquest;
    src: url(/assets/knightsquest.ttf) format('truetype');
}

    * {
        box-sizing: border-box;
    }

    body {
        padding: 0px;
        margin: 0px;
        background: url(/assets/headerbg2.png);
    }

    header {
        color: #FFF;
        position: fixed;
        top: 0px;
        left: 0px;
        width: 100%;
        background: url(/assets/headerbg2.png);
        height: 42px;
        padding: 5px;
    }

    header #logo {
        display: block;
        float: left;
    }

    header .title {
        float: left;
        font-size: 32px;
        text-transform: uppercase;
        margin-top: -3px;
        margin-left: 10px;
    }

    header .links {
        float: right;
        margin-right: 10px;
    }

    header .links a {
        font-family: knightsquest; 
        color: #FFF;
        font-size: 26px;
        padding: 5px;
    }

    header span.robot {
        font-family: robothead;
    }

    header span.quest {
        font-family: knightsquest;
        font-size: 40px;
    }

    #viewer {
        background: url(/assets/angbandtk/bgtile.png) #5c5;
        position: relative;
        margin: 40px auto;
    }

    .bot {
        /*background-color: #000;*/
        width: 32px;
        height: 32px;
        position: absolute;

        /*background: url(/assets/angbandtk/dg_classm32.gif);*/

        transition: all linear 300ms;
        -webkit-transition: all linear 300ms;
    }

    .info {
        float: right;
        margin: 15px;
    }

    /* set background-position with javascript */

    .sprite {
        width: 32px;
        height: 32px;
    }

    .sprite.classm {
        background: url(/assets/angbandtk/dg_classm32.gif);
    }

    .sprite.dragon {
        background: url(/assets/angbandtk/dg_dragon32.gif);
    }

    .sprite.humans {
        background: url(/assets/angbandtk/dg_humans32.gif);
    }

    .sprite.misc {
        background: url(/assets/angbandtk/dg_misc32.gif);
    }

    .sprite.people {
        background: url(/assets/angbandtk/dg_people32.gif);
    }

    .sprite.undead {
        background: url(/assets/angbandtk/dg_undead32.gif);
    }

    .sprite.uniques {
        background: url(/assets/angbandtk/dg_uniques32.gif);
    }

    .sprite.monster1 {
        background: url(/assets/angbandtk/dg_monster132.gif);
    }

    .sprite.monster2 {
        background: url(/assets/angbandtk/dg_monster232.gif);
    }

    .sprite.monster3 {
        background: url(/assets/angbandtk/dg_monster332.gif);
    }
    
    .sprite.monster4 {
        background: url(/assets/angbandtk/dg_monster432.gif);
    }

    .sprite.monster5 {
        background: url(/assets/angbandtk/dg_monster532.gif);
    }

    .sprite.monster6 {
        background: url(/assets/angbandtk/dg_monster632.gif);
    }

    .sprite.monster7 {
        background: url(/assets/angbandtk/dg_monster732.gif);
    }

    /* let's go for 30% */

</style>
<script>
    $(function() {

        var bots = []

        var $window = $(window)
        var $viewer = $("#viewer")

        var PX = 32
        var PY = 32

        var padding = 0

        $window.on('resize', function() {
            console.log("RESIZE")
        })

        // first, get the world
        $.get("/game", function(gameInfo) {

            var w = gameInfo.width
            var h = gameInfo.height
            var ms = gameInfo.tick

            // this will make it scroll
            $viewer.width((w) * PX)
            $viewer.height((h) * PY)

            console.log("GAME INFO", w, h, ms)

            function poll() {
                $.get("/game/minions", function(bots) {
                    tick(bots)
                })
            }

            function tick(bots) {

                $(".bot").addClass("inactive")

                bots.forEach(function(bot) {
                    var $bot = $("#" + bot.id)

                    if (!$bot.length) {
                        console.log("NEW BOT", bot.id, bot.name, bot.x, bot.y)
                        $bot = botView(bot)
                        $viewer.append($bot)
                    }

                    $bot.css({left: (bot.x) * PX + padding, top: (bot.y) * PY + padding})
                    // $bot.css({width: PX, height: PY})
                    $bot.removeClass("inactive")
                })

                $(".bot.inactive").remove()
            }

            function botView(bot) {
                var $bot = $("<div class='bot sprite undead' id='"+bot.id+"'></div>")
                $bot.data(bot)
                // compute offset mathematically
                // dragon-3-4
                var xi = 3
                var yi = 4
                $bot.css({'background-position': '-' + xi*32 + 'px -' + yi*32 + 'px'})
                return $bot
            }

            poll()
            setInterval(poll, ms)
        })


    })
</script>

</head>
<body>

<div id="viewer">
</div>
<header>
    <img id="logo" src="/assets/logo2.png"></div>
    <div class="title"><span class='robot'>Robot</span><span class='quest'>Quest</span></div>
    <div class="links">
        <a href="/leaderboards.html">wartzog has 345 kills!</a>
        <a href="/documentation.html">Wat?</a>
    </div>
</header>
</body>
